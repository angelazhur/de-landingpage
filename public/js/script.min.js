$(document).ready(function(){$(".advantages-content").masonry({itemSelector:".advantages__item",columnWidth:".advantages__item",gutter:80,percentPosition:!0,gutter:$(window).width()<664?0:80});let e=$(".menu-toggle"),o=$(".header__dropdown");$(document).mouseup(function(t){o.is(t.target)||0!==o.has(t.target).length||(o.removeClass("show"),e.removeClass("active")),e.on("click",function(t){e.hasClass("active")?(e.removeClass("active"),o.removeClass("show")):(e.addClass("active"),o.addClass("show"))})});let t=$(".popup-btn"),a=$(".popup-form"),n=$(".modal_content_close");t.on("click",function(e){e.preventDefault(),a.addClass("modal_content_show")}),n.on("click",function(e){e.preventDefault(),a.removeClass("modal_content_show"),a.removeClass("modal_error")}),$(document).keyup(function(e){27===e.keyCode&&a.hasClass("modal_content_show")&&(a.removeClass("modal_content_show"),a.removeClass("modal_error"))}),$(".ajax-form").on("submit",function(e){if(e.preventDefault(),function(e){e.find(".text-error").remove();let o=e.find(".name-field"),t=e.find(".email-field"),a=e.find(".message-area"),n=!1,s=!1,r=!1;textarea_warning='<span class="text-error for-text">Введите сообщение</span>',o.val().length<2&&(s=!0,o.before('<span class="text-error for-name">Введите полное имя</span>'),e.find(".for-name").css({bottom:o.position().top+o.outerHeight()+2,color:"red"}));n?(n=!t.val(),t.before('<span class="text-error for-email">Поле e-mail обязательно к заполнению</span>'),e.find(".for-email").css({bottom:t.position().top+t.outerHeight()+2,color:"red"})):/^\w+([\.-]?\w+)*@(((([a-z0-9]{2,})|([a-z0-9][-][a-z0-9]+))[\.][a-z0-9])|([a-z0-9]+[-]?))+[a-z0-9]+\.([a-z]{2}|(com|net|org|edu|int|mil|gov|arpa|biz|aero|name|coop|info|pro|museum))$/i.test(t.val())||(n=!0,t.before('<span class="text-error for-email">Вы указали недопустимый e-mail</span>'),e.find(".for-email").css({bottom:t.position().top+t.outerHeight()+2,color:"red"}));e.find(".email-field").toggleClass("error",n),a.val().length<2&&(r=!0,a.before(textarea_warning),e.find(".for-text").css({bottom:a.position().top+a.outerHeight()+2,color:"red"}));return s||n||r}($(this)))return!1;let o=$(this),t=$(this).serialize();$.ajax({url:this.action,type:this.method,data:t,success:function(e){o[0].reset(),$(".ajax-notify__content").html(e),$(".popup-form.modal_content_show").removeClass("modal_content_show"),$(".ajax-notify").addClass("show"),setTimeout(()=>{$(".ajax-notify.show").removeClass("show"),$(".ajax-notify__content").html("")},2500)}})}),$(document).mouseup(function(e){let o=$(".popup-form .ajax-content"),t=$(".ajax-notify .ajax-notify__content");o.is(e.target)||0!==o.has(e.target).length||o.parent(".popup-form").removeClass("modal_content_show"),t.is(e.target)||0!==t.has(e.target).length||t.parent(".ajax-notify").removeClass("show")})});